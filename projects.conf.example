# DockMaster Projects Configuration
# Copy this file to projects.conf and configure your projects
# projects.conf is git-ignored, only this example is committed

# Example: Site project with PHP-FPM
myapp:
  type: site
  domain: myapp.test
  target:
    container: myapp-nginx
    proxy_type: fpm
    fpm:
      container: myapp-php-fpm
      port: 9000
      enabled: true
  mysql:
    port: 3308
    target: myapp-mysql
    target_port: 3306
    enabled: true
  ssl: true
  docker:
    compose: /path/to/myapp/docker-compose.yml
    override: /path/to/myapp/docker-compose.override.yml
  enabled: true

# Example: Proxy project with Docker compose path
another-project:
  type: proxy
  domain: another.test
  http:
    port: 8092
    enabled: true
  https:
    port: null
    enabled: false
  mysql:
    port: 3318
    target: localhost
    target_port: 3318
    enabled: true
  ssl: false
  docker:
    compose: /path/to/another/docker-compose.yml
    override: null
  enabled: true

# Example: Proxy project with WSS (WebSocket Secure) support
websocket-project:
  type: proxy
  domain: ws.test
  http:
    port: 8080
    enabled: true
  https:
    port: 8080
    enabled: true
  wss:
    enabled: true
    port: 8080
  mysql:
    port: null
    target: localhost
    target_port: 3306
    enabled: false
  ssl: true
  docker:
    compose: null
    override: null
  enabled: true

# Example: Proxy project with SSL proxy mode
# SSL proxy: nginx has SSL certificate, but proxies to HTTP backend
ssl-proxy-project:
  type: proxy
  domain: proxyssl.test
  http:
    port: 8087
    enabled: true
  https:
    port: 8087
    enabled: true
  mysql:
    port: null
    target: localhost
    target_port: 3306
    enabled: false
  ssl: proxy
  docker:
    compose: null
    override: null
  enabled: true

# Example: Site project with target.port (recommended when using shared dockmaster network)
# Uses a unique host port instead of Docker DNS; avoids wrong-project routing / "file not found".
# In the project's docker-compose.override.yml: add dockmaster network and expose nginx, e.g.:
#   services:
#     nginx:
#       ports: ["8081:80"]
#       networks: [dockmaster]
#   networks:
#     dockmaster: { external: true }
site-by-port:
  type: site
  domain: sitebyport.test
  target:
    container: sitebyport-nginx
    port: 8081
    proxy_type: 80
  ssl: true
  docker:
    compose: /path/to/project/docker-compose.yml
    override: /path/to/project/docker-compose.override.yml
  enabled: true
